(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{473:function(s,e,n){s.exports=n.p+"assets/img/v3-1.47bb6c33.jpg"},540:function(s,e,n){"use strict";n.r(e);var t=n(2),a=Object(t.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"vue3-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue3-2"}},[s._v("#")]),s._v(" Vue3.2")]),s._v(" "),e("h2",{attrs:{id:"第一个-script-setup"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第一个-script-setup"}},[s._v("#")]),s._v(" 第一个："),e("code",[s._v("<script setup>")])]),s._v(" "),e("p",[e("code",[s._v("从一开始学习vue3就注意到了实验性的<script setup>。因为简洁的写法受到许多人追捧（写过setup(){return{}} 的人都知道），甚至有人说这才是vue3的完全形态。看了更新描述，emmm....官方吐槽最为致命。")]),s._v(" "),e("img",{attrs:{src:n(473)}}),e("br"),s._v(" "),e("code",[s._v("<script setup> 是一种编译时语法糖，可在 SFC 内使用 Composition API 时**极大地改善工作效率。")])]),s._v(" "),e("h2",{attrs:{id:"第二个-新增-style-v-bind"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第二个-新增-style-v-bind"}},[s._v("#")]),s._v(" 第二个："),e("code",[s._v("新增<style> v-bind")])]),s._v(" "),e("p",[e("code",[s._v("而<style> v-bind呢，简单地来说就是可以在内使用组件定义的动态值。官方给出了例子：")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("import { ref } from 'vue'\nconst color = ref('red')\n<\/script>\n\n<template>\n<button @click=\"color = color === 'red' ? 'green' : 'red'\">\n  Color is: {{ color }}\n</button>\n</template>\n\n<style scoped>\nbutton {\ncolor: v-bind(color);\n}\n</style>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("p",[e("code",[s._v("文档地址：https://v3.vuejs.org/api/sfc-script-setup.html")])]),s._v(" "),e("h2",{attrs:{id:"第三个-新增-definecustomelement方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第三个-新增-definecustomelement方法"}},[s._v("#")]),s._v(" 第三个：新增 defineCustomElement方法")]),s._v(" "),e("p",[s._v("Vue 3.2 引入了一个新的 defineCustomElement 方法，可以使用 Vue 组件 API 轻松创建原生自定义元素：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("import { defineCustomElement } from 'vue'\n​\nconst MyVueElement = defineCustomElement({\n  // normal Vue component options here\n})\n​\n// Register the custom element.\n// After registration, all `<my-vue-element>` tags\n// on the page will be upgraded.\ncustomElements.define('my-vue-element', MyVueElement)\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("h2",{attrs:{id:"第四个-性能改进"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第四个-性能改进"}},[s._v("#")]),s._v(" 第四个：性能改进")]),s._v(" "),e("p",[s._v("此处有很大篇幅讲述3.2版本的性能升级，其中提到了新的指令v-memo，简单来说这个指令会记住模板树的一部分，不仅跳过虚拟 DOM 差异，而且完全跳过新 VNode 的创建。可用于复杂的大型页面。")]),s._v(" "),e("h2",{attrs:{id:"第五个-服务器渲染"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第五个-服务器渲染"}},[s._v("#")]),s._v(" 第五个：服务器渲染")]),s._v(" "),e("p",[s._v("最后提到了服务端渲染与新的Effect Scope API。")]),s._v(" "),e("h2",{attrs:{id:"第6个-1024lab-再说点儿"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第6个-1024lab-再说点儿"}},[s._v("#")]),s._v(" 第6个：1024Lab 再说点儿")]),s._v(" "),e("p",[s._v("defineProps、defineEmits、defineExpose、withDefaults属于compiler macro，编译器宏。文档中也说到："),e("br"),s._v("\nThey do not need to be imported, and are compiled away when is processed")]),s._v(" "),e("p",[s._v("他们不需要引入，会在编译的时候处理掉。"),e("br"),s._v("\n然而不引入你用的时候就会报错。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("<script setup lang=\"ts\">\nconst props = defineProps<{\n  value?: number;\n}>();\n​\nconst emit = defineEmits<{\n  (e: 'update:value', value: number): void;\n}>();\n<\/script>\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("首先eslint会报错：\n"),e("code",[s._v("ESLint: 'defineEmits' is not defined.(no-undef)")])]),s._v(" "),e("p",[s._v("此时你需要更改eslint-plugin-vue的配置")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('//https://eslint.vuejs.org/user-guide/#compiler-macros-such-as-defineprops-and-defineemits-are-warned-by-no-undef-rule\nmodule.exports = {\n  globals: {\n    defineProps: "readonly",\n    defineEmits: "readonly",\n    defineExpose: "readonly",\n    withDefaults: "readonly"\n  }\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[s._v("然后可能编译后浏览器控制台会报错\n"),e("code",[s._v("defineEmits is not defined")])]),s._v(" "),e("p",[s._v("你可能会发现defineEmits等并没有在编译的时候处理掉，通过浏览器看源代码defineEmits还在，且画着红色波浪线。此时你可能需要查看package.json中各个包的版本以及vite的版本2.4.x，更新后重试，此时编译出来的代码应该是这样：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('const _sfc_main = _defineComponent({\n  props: {\n    value: { type: Number, required: false }\n  },\n  emits: ["update:value"],\n  setup(__props, { expose, emit }) {}\n })\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])])])}),[],!1,null,null,null);e.default=a.exports}}]);